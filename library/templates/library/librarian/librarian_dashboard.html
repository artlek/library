{% extends "library/base.html" %}

{% block title %}Dashboard{% endblock %}
{% block content %}
<div class="col-xxl-10 m-3">
    <h1 class="header">Dashboard</h1>
    <div class="row row-cols-2 row-cols-md-4 g-3 my-4">
        <div class="col">
            <div class="card mb-3 h-100">
                <div class="card-body">
                    <div class="card-value fs-1">{{ books_total }}</div>
                    <div class="card-header">Books</div>
                    <div class="card-description small">Number of all books in the library</div>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="card mb-3 h-100">
                <div class="card-body">
                    <div class="card-value fs-1">{{ borrowed_books_count }}</div>
                    <div class="card-header">Borrowed</div>
                    <div class="card-description small">Number of borrowed books</div>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="card mb-3 h-100">
                <div class="card-body">
                    <div class="card-value fs-1">{{ books_after_deadline }}</div>
                    <div class="card-header">After the deadline</div>
                    <div class="card-description small">Books borrowed more than one month ago</div>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="card mb-3 h-100">
                <div class="card-body">
                    <div class="card-value fs-1">{{ readers }}</div>
                    <div class="card-header">Readers</div>
                    <div class="card-description small">Number of all readers</div>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="card mb-3 h-100">
                <div class="card-body">
                    <div class="card-value fs-1">{{ authors }}</div>
                    <div class="card-header">Authors</div>
                    <div class="card-description small">Number of all authors</div>
                </div>
            </div>
        </div>
    </div>
    <h2 class="header">Last 5 borrowings</h2>
    {% if last5borrowings %}
    <table class="table table-hover table-borderless table-light table-sm small mb-4">
        <thead>
            <tr>
                <th class="col"></th>
                <th class="col">Book</th>
                <th class="col">Author</th>
                <th class="col">Reader</th>
                <th class="col">Borrowe date</th>
            </tr>
        </thead>
        <tbody>
            {% for borrowing in last5borrowings %}
            <tr>
                <td>{{ forloop.counter }}.</td>
                <td class=" gray-text">{{ borrowing.book.id }}: {{ borrowing.book.title }}</td>
                <td class=" gray-text">{{ borrowing.book.author.name }} {{ borrowing.book.author.surname }}</td>
                <td class=" gray-text">{{ borrowing.user.first_name }} {{ borrowing.user.last_name }}</td>
                <td class=" gray-text">{{ borrowing.borrow_date }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p class="text-secondary small">There is no borrowing yet</p>
{% endif %}
</div>
{% endblock %}